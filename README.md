# 剧情游戏引擎使用说明

## 基本格式

每个剧情片段使用以下格式:

```
# 场景ID

[角色][对话内容][选项][图片路径][文字颜色]
```

### 详细说明:

1. **场景ID**
   
   - 以 `#` 开头,如 `# main`, `# room1`
   - 必须唯一,用于场景跳转
   - `main` 为游戏起始场景
2. **角色**
   
   - 放在第一个 `[]` 中
   - 如: `[护士长]`, `[我]`, `[旁白]`
   - 会显示在对话框上方
3. **对话内容**
   
   - 放在第二个 `[]` 中
   - 支持普通文本
   - 会以打字机效果显示
4. **选项**
   
   - 放在第三个 `[]` 中
   - 多个选项用 `|` 分隔
   - 格式: `选项文本#跳转场景ID`
   - 如: `[查看文件#check_files|离开#leave]`
   - 留空 `[]` 表示无选项,点击空白位置即可继续
5. **图片路径**
   
   - 放在第四个 `[]` 中
   - 相对于 index.html 的路径或者文件直链
   - 留空 `[]` 表示不显示图片
6. **文字颜色**
   
   - 放在第五个 `[]` 中
   - 使用HEX颜色代码（十六进制颜色码）
   - 如: `[#FF0000]` 为红色
   - 留空默认为白色

## 示例:

```
# main

[旁白][欢迎来到医院][][][#CCCCCC]
[我][这里好黑啊...][查看四周#look_around|离开#leave][][#E6E6FA]

# look_around

[旁白][你打开手电筒,看到墙上布满了诡异的痕迹。][继续查看#continue|返回#main][images/wall.jpg][#FF6B6B]
```

## 特殊功能:

1. **自动存档**
   
   - 游戏会自动保存进度
   - 重新打开时可选择继续或重新开始
2. **音乐控制**
   
   - 右上角可控制背景音乐
   - 建议玩家戴耳机体验
3. **文字效果**
   
   - 对话采用打字机效果
   - 点击可加速显示
   - 空格/回车可继续下一段

## 注意事项:

1. 每个场景必须以 `#` 开头
2. 所有内容都要放在 `[]` 中
3. 选项必须包含跳转场景ID
4. 图片路径要确保正确
5. 颜色代码要包含 `#` 符号

## 建议写法:

1. 主要剧情用 `main` 开始
2. 重要分支用有意义的ID
3. 结局场景建议用 `end_xxx`
4. 保持场景ID的可读性
5. 合理使用颜色区分角色

## 调试技巧:

1. 打开浏览器控制台可看到加载信息
2. 检查解析后的故事数据结构
3. 确保所有场景ID都能正确跳转
4. 测试所有分支选项
